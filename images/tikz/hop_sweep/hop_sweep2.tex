\pgfdeclarelayer{background}
\pgfdeclarelayer{foreground}
\pgfsetlayers{background,main,foreground}

\tikzstyle{cloud1} = [draw=black, thick, fill=red!20, minimum height = 1em]
\tikzstyle{block_l} =[draw, text centered, fill=red!15, minimum width=2.5cm, minimum height=2.5cm]
\tikzstyle{block_m} =[draw, text centered, fill=blue!15, minimum width=2.5cm, minimum height=1.5cm]
\tikzstyle{block_s} =[draw, text centered, fill=blue!15, minimum width=2cm, minimum height=1.5cm]
\tikzstyle{line} = [draw, thick, decoration={markings,mark=at position 1 with {\arrow[scale=2.2,black]{>}}},
    postaction={decorate},
    shorten >=0.4pt]
\tikzstyle{line_s} = [draw, ->]
\tikzstyle{line_st} = [draw,thick, ->]

\begin{tikzpicture}
  % draw the grid and the numbers
  \draw (-1,+1) grid (7,9) foreach \i in {0,...,7}{
    (\i-.5,9.5) node{\i} (-1.5,8.5-\i) node{\i}};

  % for every line we give first and last index to fill
  \foreach[count=\j] \a/\b in {0/4,0/4,0/4,0/4,0/4}
    \foreach \i in {\a,...,\b}
    \fill[blue!35,shift={(+0.5,+9.5)},yscale=-1] (\i,\j) circle(2.0mm);

    \foreach \y in {8.5,...,5.5}{
      \foreach \x in {-0.5}{
        \path [line] (\x+1, \y) -- (\x+5, \y);
        \path [line_s] (\x+5, \y) -- (+.5, \y-1);%
      }}
    \path [line] (+0.5, 4.5) -- (+0.5+4, 4.5);

    \path [line_st] (+3.0, +10.0) node[transition, yshift=0.3cm, xshift=-0.5cm] {sweeper} -- (+3.0, 8.5);

    \path [line_st] (+1.0, +10.0) node[transition, yshift=0.3cm, xshift=-0.5cm] {hopper} -- (+0.5, 8.5);

    % \draw[red] (+0.5,8.5) arc (0:120:0.5);
    \draw[thick, red, -latex] ($(-0.5, +8.5) + (0:0cm and 1cm)$(P) arc
    (0:180:-0.5cm and 0.45cm);
\end{tikzpicture}